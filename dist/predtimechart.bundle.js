var e={870:(e,t)=>{function a(e,t){return{validate:e,compare:t}}t.u5=void 0,t.u5={date:a(r,n),time:a(l,c),"date-time":a((function(e){const t=e.split(d);return 2===t.length&&r(t[0])&&l(t[1],!0)}),p),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&u.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(y.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return m.lastIndex=0,m.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=_&&e>=f}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:g},double:{type:"number",validate:g},password:!0,binary:!0},t.u5,a(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,n),a(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),a(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,p),Object.keys(t.u5);const s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function r(e){const t=s.exec(e);if(!t)return!1;const a=+t[1],r=+t[2],n=+t[3];return r>=1&&r<=12&&n>=1&&n<=(2===r&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(a)?29:i[r])}function n(e,t){if(e&&t)return e>t?1:e<t?-1:0}const o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const a=o.exec(e);if(!a)return!1;const s=+a[1],i=+a[2],r=+a[3],n=a[5];return(s<=23&&i<=59&&r<=59||23===s&&59===i&&60===r)&&(!t||""!==n)}function c(e,t){if(!e||!t)return;const a=o.exec(e),s=o.exec(t);return a&&s?(e=a[1]+a[2]+a[3]+(a[4]||""))>(t=s[1]+s[2]+s[3]+(s[4]||""))?1:e<t?-1:0:void 0}const d=/t|\s/i;function p(e,t){if(!e||!t)return;const[a,s]=e.split(d),[i,r]=t.split(d),o=n(a,i);return void 0!==o?o||c(s,r):void 0}const h=/\/|:/,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,m=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,f=-(2**31),_=2**31-1;function g(){return!0}const y=/[^\\]\\Z/},510:(e,t,a)=>{const s=a(63);s.code='require("ajv/dist/runtime/equal").default',t.Z=s},499:(e,t)=>{function a(e){const t=e.length;let a,s=0,i=0;for(;i<t;)s++,a=e.charCodeAt(i++),a>=55296&&a<=56319&&i<t&&(a=e.charCodeAt(i),56320==(64512&a)&&i++);return s}t.Z=a,a.code='require("ajv/dist/runtime/ucs2length").default'},253:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(81),i=a.n(s),r=a(645),n=a.n(r)()(i());n.push([e.id,"/**\n * predtimechart: A JavaScript (ES6 ECMAScript) module for forecast visualization.\n */\n\n.forecastViz_dot {\n    height: 15px;\n    width: 15px;\n    border-radius: 50%;\n    border: 1px solid black;\n    display: inline-block;\n}\n\n.forecastViz_select_data {\n    font-size: 14px;\n}\n\n#forecastViz_select_model {\n    height: 48vh;\n    overflow-y: scroll;\n    font-size: 14px;\n}\n\n.forecastViz_disclaimer {\n    text-align: center;\n    margin-left: 3%;\n    margin-right: 3%;\n    font-size: 18px;\n}\n",""]);const o=n},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",s=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),s&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),s&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,s,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(s)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(n[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);s&&n[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),a&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=a):d[2]=a),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},63:e=>{e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,i,r;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(i=s;0!=i--;)if(!e(t[i],a[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((s=(r=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(i=s;0!=i--;)if(!Object.prototype.hasOwnProperty.call(a,r[i]))return!1;for(i=s;0!=i--;){var n=r[i];if(!e(t[n],a[n]))return!1}return!0}return t!=t&&a!=a}},379:e=>{var t=[];function a(e){for(var a=-1,s=0;s<t.length;s++)if(t[s].identifier===e){a=s;break}return a}function s(e,s){for(var r={},n=[],o=0;o<e.length;o++){var l=e[o],c=s.base?l[0]+s.base:l[0],d=r[c]||0,p="".concat(c," ").concat(d);r[c]=d+1;var h=a(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=i(u,s);s.byIndex=o,t.splice(o,0,{identifier:p,updater:m,references:1})}n.push(p)}return n}function i(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,i){var r=s(e=e||[],i=i||{});return function(e){e=e||[];for(var n=0;n<r.length;n++){var o=a(r[n]);t[o].references--}for(var l=s(e,i),c=0;c<r.length;c++){var d=a(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},569:e=>{var t={};e.exports=function(e,a){var s=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(a)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var s="";a.supports&&(s+="@supports (".concat(a.supports,") {")),a.media&&(s+="@media ".concat(a.media," {"));var i=void 0!==a.layer;i&&(s+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),s+=a.css,i&&(s+="}"),a.media&&(s+="}"),a.supports&&(s+="}");var r=a.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},840:(e,t,a)=>{e.exports=d,e.exports.default=d;const s={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://github.com/reichlab/predtimechart/blob/main/src/schema.json",title:"predtimechart options",description:"predtimechart options object schema",type:"object",additionalProperties:!1,properties:{available_as_ofs:{description:"`object` that maps `target_variables` `value` to an `array` of dates in 'YYYY-MM-DD' format that have truth and/or forecasts available",type:"object",minProperties:1,additionalProperties:{type:"array",minItems:1,items:{type:"string",format:"date"}}},current_date:{description:"`available_as_ofs` `value` key to use for the initial plot",type:"string",format:"date"},disclaimer:{description:"`string` providing any important information users should know",type:"string",minLength:1},initial_as_of:{description:"`string` specifying the initial date from 'available_as_ofs' (in 'YYYY-MM-DD' format) to use for the initially-selected _as_of_ date",type:"string",format:"date"},initial_checked_models:{description:"`models` value(s) to use for the initial plot",type:"array",uniqueItems:!0},initial_interval:{description:"`intervals` value to use for the initial plot",type:"string"},initial_target_var:{description:"`target_variables` `value` key to use for the initial plot",type:"string"},initial_task_ids:{description:"an `object` to use for the initial plot. format is identical to `_fetchData()`'s `taskIDs` arg",type:"object",minProperties:1},initial_xaxis_range:{description:"`array` of two dates in 'YYYY-MM-DD' format that specify the initial xaxis range to use. To not initialize the range, pass `null` for its value",type:["array","null"],minItems:2,maxItems:2,uniqueItems:!0,items:{type:"string",format:"date"}},initial_yaxis_range:{description:"`array` of two values (format depends on outcome variable) that specify the initial yaxis range to use. To not initialize the range, pass `null` for its value",type:["array","null"],minItems:2,maxItems:2,uniqueItems:!0,items:{oneOf:[{type:"string"},{type:"number"}]}},intervals:{description:"`array` of one or more strings of the format '<integer>%' between '0%' and '100%' inclusive, representing percentages. Currently only '50%' and '95%' are used (purpose: TBD)",type:"array",minItems:1,uniqueItems:!0,items:{type:"string",pattern:"^[1-9]?[0-9]%$"}},models:{description:"`array` of model names (`string`s) that provide data",type:"array",minItems:1,uniqueItems:!0},target_variables:{description:"`array` of `object`s defining the target variables in the data. Each object contains three keys: `value`, `text`, `plot_text`",type:"array",minItems:1,items:{type:"object",additionalProperties:!1,properties:{value:{description:"used as the main value that's passed around for the target",type:"string",minLength:1},text:{description:"human-readable text",type:"string",minLength:1},plot_text:{description:"plot text",type:"string",minLength:1}},required:["value","text","plot_text"]}},task_ids:{description:"`object` defining the _tasks_ in the data as described in `_fetchData`'s `taskIDs` arg",type:"object",minProperties:1,additionalProperties:{type:"object",patternProperties:{"^[A-Za-z]+[A-Za-z0-9_-]*$":{type:"array",items:{type:"object",properties:{value:{description:"used as the main value that's passed around for the task_id",type:"string",minLength:1},text:{description:"human-readable text",type:"string",minLength:1}}}}}}}},required:["available_as_ofs","current_date","initial_as_of","initial_checked_models","initial_interval","initial_target_var","initial_task_ids","intervals","models","target_variables","task_ids"]},i=Object.prototype.hasOwnProperty,r=a(499).Z,n=a(510).Z,o=a(870).u5.date,l=new RegExp("^[1-9]?[0-9]%$","u"),c=new RegExp("^[A-Za-z]+[A-Za-z0-9_-]*$","u");function d(e,{instancePath:t="",parentData:a,parentDataProperty:p,rootData:h=e}={}){let u=null,m=0;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.available_as_ofs){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"available_as_ofs"},message:"must have required property 'available_as_ofs'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.current_date){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"current_date"},message:"must have required property 'current_date'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.initial_as_of){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_as_of"},message:"must have required property 'initial_as_of'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.initial_checked_models){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_checked_models"},message:"must have required property 'initial_checked_models'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.initial_interval){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_interval"},message:"must have required property 'initial_interval'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.initial_target_var){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_target_var"},message:"must have required property 'initial_target_var'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.initial_task_ids){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"initial_task_ids"},message:"must have required property 'initial_task_ids'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.intervals){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"intervals"},message:"must have required property 'intervals'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.models){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"models"},message:"must have required property 'models'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.target_variables){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"target_variables"},message:"must have required property 'target_variables'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.task_ids){const e={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"task_ids"},message:"must have required property 'task_ids'"};null===u?u=[e]:u.push(e),m++}for(const a in e)if(!i.call(s.properties,a)){const e={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};null===u?u=[e]:u.push(e),m++}if(void 0!==e.available_as_ofs){let a=e.available_as_ofs;if(a&&"object"==typeof a&&!Array.isArray(a)){if(Object.keys(a).length<1){const e={instancePath:t+"/available_as_ofs",schemaPath:"#/properties/available_as_ofs/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===u?u=[e]:u.push(e),m++}for(const e in a){let s=a[e];if(Array.isArray(s)){if(s.length<1){const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/available_as_ofs/additionalProperties/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===u?u=[a]:u.push(a),m++}const a=s.length;for(let i=0;i<a;i++){let a=s[i];if("string"==typeof a){if(!o.validate(a)){const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i,schemaPath:"#/properties/available_as_ofs/additionalProperties/items/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===u?u=[a]:u.push(a),m++}}else{const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+i,schemaPath:"#/properties/available_as_ofs/additionalProperties/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[a]:u.push(a),m++}}}else{const a={instancePath:t+"/available_as_ofs/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/available_as_ofs/additionalProperties/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[a]:u.push(a),m++}}}else{const e={instancePath:t+"/available_as_ofs",schemaPath:"#/properties/available_as_ofs/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.current_date){let a=e.current_date;if("string"==typeof a){if(!o.validate(a)){const e={instancePath:t+"/current_date",schemaPath:"#/properties/current_date/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/current_date",schemaPath:"#/properties/current_date/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.disclaimer){let a=e.disclaimer;if("string"==typeof a){if(r(a)<1){const e={instancePath:t+"/disclaimer",schemaPath:"#/properties/disclaimer/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/disclaimer",schemaPath:"#/properties/disclaimer/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.initial_as_of){let a=e.initial_as_of;if("string"==typeof a){if(!o.validate(a)){const e={instancePath:t+"/initial_as_of",schemaPath:"#/properties/initial_as_of/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/initial_as_of",schemaPath:"#/properties/initial_as_of/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.initial_checked_models){let a=e.initial_checked_models;if(Array.isArray(a)){let e,s=a.length;if(s>1)e:for(;s--;)for(e=s;e--;)if(n(a[s],a[e])){const a={instancePath:t+"/initial_checked_models",schemaPath:"#/properties/initial_checked_models/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"};null===u?u=[a]:u.push(a),m++;break e}}else{const e={instancePath:t+"/initial_checked_models",schemaPath:"#/properties/initial_checked_models/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.initial_interval&&"string"!=typeof e.initial_interval){const e={instancePath:t+"/initial_interval",schemaPath:"#/properties/initial_interval/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}if(void 0!==e.initial_target_var&&"string"!=typeof e.initial_target_var){const e={instancePath:t+"/initial_target_var",schemaPath:"#/properties/initial_target_var/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}if(void 0!==e.initial_task_ids){let a=e.initial_task_ids;if(a&&"object"==typeof a&&!Array.isArray(a)){if(Object.keys(a).length<1){const e={instancePath:t+"/initial_task_ids",schemaPath:"#/properties/initial_task_ids/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/initial_task_ids",schemaPath:"#/properties/initial_task_ids/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.initial_xaxis_range){let a=e.initial_xaxis_range;if(!Array.isArray(a)&&null!==a){const e={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/type",keyword:"type",params:{type:s.properties.initial_xaxis_range.type},message:"must be array,null"};null===u?u=[e]:u.push(e),m++}if(Array.isArray(a)){if(a.length>2){const e={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/maxItems",keyword:"maxItems",params:{limit:2},message:"must NOT have more than 2 items"};null===u?u=[e]:u.push(e),m++}if(a.length<2){const e={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};null===u?u=[e]:u.push(e),m++}const e=a.length;for(let s=0;s<e;s++){let e=a[s];if("string"==typeof e){if(!o.validate(e)){const e={instancePath:t+"/initial_xaxis_range/"+s,schemaPath:"#/properties/initial_xaxis_range/items/format",keyword:"format",params:{format:"date"},message:'must match format "date"'};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/initial_xaxis_range/"+s,schemaPath:"#/properties/initial_xaxis_range/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}let s,i=a.length;if(i>1){const e={};for(;i--;){let r=a[i];if("string"==typeof r){if("number"==typeof e[r]){s=e[r];const a={instancePath:t+"/initial_xaxis_range",schemaPath:"#/properties/initial_xaxis_range/uniqueItems",keyword:"uniqueItems",params:{i,j:s},message:"must NOT have duplicate items (items ## "+s+" and "+i+" are identical)"};null===u?u=[a]:u.push(a),m++;break}e[r]=i}}}}}if(void 0!==e.initial_yaxis_range){let a=e.initial_yaxis_range;if(!Array.isArray(a)&&null!==a){const e={instancePath:t+"/initial_yaxis_range",schemaPath:"#/properties/initial_yaxis_range/type",keyword:"type",params:{type:s.properties.initial_yaxis_range.type},message:"must be array,null"};null===u?u=[e]:u.push(e),m++}if(Array.isArray(a)){if(a.length>2){const e={instancePath:t+"/initial_yaxis_range",schemaPath:"#/properties/initial_yaxis_range/maxItems",keyword:"maxItems",params:{limit:2},message:"must NOT have more than 2 items"};null===u?u=[e]:u.push(e),m++}if(a.length<2){const e={instancePath:t+"/initial_yaxis_range",schemaPath:"#/properties/initial_yaxis_range/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};null===u?u=[e]:u.push(e),m++}const e=a.length;for(let s=0;s<e;s++){let e=a[s];const i=m;let r=!1,n=null;const o=m;if("string"!=typeof e){const e={instancePath:t+"/initial_yaxis_range/"+s,schemaPath:"#/properties/initial_yaxis_range/items/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}o===m&&(r=!0,n=0);const l=m;if("number"!=typeof e||!isFinite(e)){const e={instancePath:t+"/initial_yaxis_range/"+s,schemaPath:"#/properties/initial_yaxis_range/items/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};null===u?u=[e]:u.push(e),m++}var f;if((f=l===m)&&r?(r=!1,n=[n,1]):f&&(r=!0,n=1),r)m=i,null!==u&&(i?u.length=i:u=null);else{const e={instancePath:t+"/initial_yaxis_range/"+s,schemaPath:"#/properties/initial_yaxis_range/items/oneOf",keyword:"oneOf",params:{passingSchemas:n},message:"must match exactly one schema in oneOf"};null===u?u=[e]:u.push(e),m++}}let s,i=a.length;if(i>1)e:for(;i--;)for(s=i;s--;)if(n(a[i],a[s])){const e={instancePath:t+"/initial_yaxis_range",schemaPath:"#/properties/initial_yaxis_range/uniqueItems",keyword:"uniqueItems",params:{i,j:s},message:"must NOT have duplicate items (items ## "+s+" and "+i+" are identical)"};null===u?u=[e]:u.push(e),m++;break e}}}if(void 0!==e.intervals){let a=e.intervals;if(Array.isArray(a)){if(a.length<1){const e={instancePath:t+"/intervals",schemaPath:"#/properties/intervals/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===u?u=[e]:u.push(e),m++}const e=a.length;for(let s=0;s<e;s++){let e=a[s];if("string"==typeof e){if(!l.test(e)){const e={instancePath:t+"/intervals/"+s,schemaPath:"#/properties/intervals/items/pattern",keyword:"pattern",params:{pattern:"^[1-9]?[0-9]%$"},message:'must match pattern "^[1-9]?[0-9]%$"'};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/intervals/"+s,schemaPath:"#/properties/intervals/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}let s,i=a.length;if(i>1){const e={};for(;i--;){let r=a[i];if("string"==typeof r){if("number"==typeof e[r]){s=e[r];const a={instancePath:t+"/intervals",schemaPath:"#/properties/intervals/uniqueItems",keyword:"uniqueItems",params:{i,j:s},message:"must NOT have duplicate items (items ## "+s+" and "+i+" are identical)"};null===u?u=[a]:u.push(a),m++;break}e[r]=i}}}}else{const e={instancePath:t+"/intervals",schemaPath:"#/properties/intervals/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.models){let a=e.models;if(Array.isArray(a)){if(a.length<1){const e={instancePath:t+"/models",schemaPath:"#/properties/models/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===u?u=[e]:u.push(e),m++}let e,s=a.length;if(s>1)e:for(;s--;)for(e=s;e--;)if(n(a[s],a[e])){const a={instancePath:t+"/models",schemaPath:"#/properties/models/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"};null===u?u=[a]:u.push(a),m++;break e}}else{const e={instancePath:t+"/models",schemaPath:"#/properties/models/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.target_variables){let a=e.target_variables;if(Array.isArray(a)){if(a.length<1){const e={instancePath:t+"/target_variables",schemaPath:"#/properties/target_variables/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===u?u=[e]:u.push(e),m++}const e=a.length;for(let s=0;s<e;s++){let e=a[s];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.value){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/required",keyword:"required",params:{missingProperty:"value"},message:"must have required property 'value'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.text){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/required",keyword:"required",params:{missingProperty:"text"},message:"must have required property 'text'"};null===u?u=[e]:u.push(e),m++}if(void 0===e.plot_text){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/required",keyword:"required",params:{missingProperty:"plot_text"},message:"must have required property 'plot_text'"};null===u?u=[e]:u.push(e),m++}for(const a in e)if("value"!==a&&"text"!==a&&"plot_text"!==a){const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};null===u?u=[e]:u.push(e),m++}if(void 0!==e.value){let a=e.value;if("string"==typeof a){if(r(a)<1){const e={instancePath:t+"/target_variables/"+s+"/value",schemaPath:"#/properties/target_variables/items/properties/value/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/target_variables/"+s+"/value",schemaPath:"#/properties/target_variables/items/properties/value/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.text){let a=e.text;if("string"==typeof a){if(r(a)<1){const e={instancePath:t+"/target_variables/"+s+"/text",schemaPath:"#/properties/target_variables/items/properties/text/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/target_variables/"+s+"/text",schemaPath:"#/properties/target_variables/items/properties/text/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.plot_text){let a=e.plot_text;if("string"==typeof a){if(r(a)<1){const e={instancePath:t+"/target_variables/"+s+"/plot_text",schemaPath:"#/properties/target_variables/items/properties/plot_text/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===u?u=[e]:u.push(e),m++}}else{const e={instancePath:t+"/target_variables/"+s+"/plot_text",schemaPath:"#/properties/target_variables/items/properties/plot_text/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[e]:u.push(e),m++}}}else{const e={instancePath:t+"/target_variables/"+s,schemaPath:"#/properties/target_variables/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[e]:u.push(e),m++}}}else{const e={instancePath:t+"/target_variables",schemaPath:"#/properties/target_variables/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[e]:u.push(e),m++}}if(void 0!==e.task_ids){let a=e.task_ids;if(a&&"object"==typeof a&&!Array.isArray(a)){if(Object.keys(a).length<1){const e={instancePath:t+"/task_ids",schemaPath:"#/properties/task_ids/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===u?u=[e]:u.push(e),m++}for(const e in a){let s=a[e];if(s&&"object"==typeof s&&!Array.isArray(s)){for(const a in s)if(c.test(a)){let i=s[a];if(Array.isArray(i)){const s=i.length;for(let n=0;n<s;n++){let s=i[n];if(s&&"object"==typeof s&&!Array.isArray(s)){if(void 0!==s.value){let i=s.value;if("string"==typeof i){if(r(i)<1){const s={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/value",schemaPath:"#/properties/task_ids/additionalProperties/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/value/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===u?u=[s]:u.push(s),m++}}else{const s={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/value",schemaPath:"#/properties/task_ids/additionalProperties/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/value/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[s]:u.push(s),m++}}if(void 0!==s.text){let i=s.text;if("string"==typeof i){if(r(i)<1){const s={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/text",schemaPath:"#/properties/task_ids/additionalProperties/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/text/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};null===u?u=[s]:u.push(s),m++}}else{const s={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n+"/text",schemaPath:"#/properties/task_ids/additionalProperties/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/properties/text/type",keyword:"type",params:{type:"string"},message:"must be string"};null===u?u=[s]:u.push(s),m++}}}else{const s={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+n,schemaPath:"#/properties/task_ids/additionalProperties/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/items/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[s]:u.push(s),m++}}}else{const s={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/task_ids/additionalProperties/patternProperties/%5E%5BA-Za-z%5D%2B%5BA-Za-z0-9_-%5D*%24/type",keyword:"type",params:{type:"array"},message:"must be array"};null===u?u=[s]:u.push(s),m++}}}else{const a={instancePath:t+"/task_ids/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/task_ids/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[a]:u.push(a),m++}}}else{const e={instancePath:t+"/task_ids",schemaPath:"#/properties/task_ids/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[e]:u.push(e),m++}}}else{const e={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};null===u?u=[e]:u.push(e),m++}return d.errors=u,0===m}}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={id:s,exports:{}};return e[s](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nc=void 0;var s,i,r,n,o,l,c,d,p,h,u,m,f,_,g={};s=a(379),i=a.n(s),r=a(795),n=a.n(r),o=a(569),l=a.n(o),c=a(565),d=a.n(c),p=a(216),h=a.n(p),u=a(589),m=a.n(u),f=a(253),(_={}).styleTagTransform=m(),_.setAttributes=d(),_.insert=l().bind(null,"head"),_.domAPI=n(),_.insertStyleElement=h(),i()(f.Z,_),f.Z&&f.Z.locals&&f.Z.locals,(()=>{function e(e){return new Date(parseInt(e.slice(0,4)),parseInt(e.slice(5,7))-1,parseInt(e.slice(8,10)))}a.d(g,{Z:()=>l});var t=a(840);const s=function(e){if(null===e||"object"!=typeof e)throw"options object is required but missing";if(!t(e))throw console.error(`_validateOptions(): invalid schema. ${t.errors.length} error(s). options:, errors:`,JSON.stringify(e,null,"    "),t.errors),`invalid options structure: ${t.errors.map((e=>JSON.stringify(e))).join(", ")}`;const a=e.available_as_ofs,s=e.target_variables;Object.keys(a).forEach((e=>{let t=!1;if(s.forEach((a=>{a.value===e&&(t=!0)})),!t)throw`available_as_ofs key not in target_variables value. key=${e}`}));const i=e.task_ids;Object.keys(i).forEach((e=>{let t=!1;if(s.forEach((a=>{a.value===e&&(t=!0)})),!t)throw`task_ids key not in target_variables value. key=${e}`}));const r=e.models;e.initial_checked_models.forEach((e=>{if(!r.includes(e))throw`initial_checked_models model not in models: ${e}`}));const n=e.initial_interval;if(!e.intervals.includes(n))throw`initial_interval not in intervals: ${n}`;const o=s.map((e=>e.value)),l=e.initial_target_var;if(!o.includes(l))throw`initial_target_var not in target_variables: ${l}`;const c=e.initial_as_of;if(!a[l].includes(c))throw`initial_as_of not in available_as_ofs: ${c}`;const d=e.initial_task_ids;if(p=new Set(Object.keys(i[l])),h=new Set(Object.keys(d)),p.size!==h.size||![...p].every((e=>h.has(e))))throw`initial_task_ids key !== task_ids: ${JSON.stringify(d)}`;var p,h;Object.keys(d).forEach((e=>{const t=d[e],a=i[l][e].map((e=>e.value));if(!a.includes(t))throw`initial_task_ids value not in task_ids. initialTaskIdValue=${t}, taskIdValues=${a}`}))};function i(e,t,a,s){return`<div class="form-group form-check"\n                 style="margin-bottom: 0${a?"":"; color: lightgrey"}">\n                <label>\n                    <input type="checkbox" id="${e}" class="model-check" ${s?"checked":""}>\n                    &nbsp;${e}\n                    &nbsp;<span class="forecastViz_dot" style="background-color: ${t}; "></span>\n                </label>\n            </div>`}function r(){const e=$("#forecastViz_Current_Truth").prop("checked"),t=$("#forecastViz_Truth_as_of").prop("checked"),a=[];e&&a.push("Current Target"),t&&a.push("Target as of"),o.state.selected_truth=a,o.fetchDataUpdatePlot(!1,!1)}function n(e,t){console.info(`flashMessage(): ${t}`),$(`\n        <div class="modal fade" id="showDialogModal" tabindex="-1" role="dialog" aria-labelledby="showDialogModalLabel" aria-hidden="true">\n          <div class="modal-dialog" role="document">\n            <div class="modal-content">\n              <div class="modal-header">\n                <h5 class="modal-title" id="showDialogModalLabel">${e}</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                  <span aria-hidden="true">&times;</span>\n                </button>\n              </div>\n              <div class="modal-body">${t}</div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n              </div>\n            </div>\n          </div>\n        </div>`).modal("show")}const o={isIndicateRedraw:!1,_fetchData:null,state:{target_variables:[],task_ids:{},intervals:[],available_as_ofs:{},current_date:"",models:[],disclaimer:"",selected_target_var:"",selected_interval:"",selected_as_of_date:"",selected_truth:["Current Target","Target as of"],selected_models:[],last_selected_models:[],colors:[],initial_xaxis_range:null,initial_yaxis_range:null,current_truth:[],as_of_truth:[],forecasts:{}},initialize(e,t,a,i){this._fetchData=t,this.isIndicateRedraw=a,console.debug("initialize(): entered");const r=document.getElementById(e);if(null===r)throw`componentDiv DOM node not found: '${e}'`;try{s(i),console.debug("initialize(): passed options are valid")}catch(e){return console.error(`invalid option(s): ${e}`),n("Init failed due to invalid option(s)",e),e}let o=!1;const l=function(e,t){const a={},s=new URLSearchParams(t);if(s.get("as_of")&&(a.initial_as_of=s.get("as_of")),s.get("interval")&&(a.initial_interval=s.get("interval")),s.get("target_var")&&(a.initial_target_var=s.get("target_var")),s.get("model")&&(a.initial_checked_models=s.getAll("model")),s.get("xaxis_range")&&(a.initial_xaxis_range=s.getAll("xaxis_range")),s.get("yaxis_range")&&(a.initial_yaxis_range=s.getAll("yaxis_range")),"initial_target_var"in a&&a.initial_target_var in e){const t={};Object.keys(e[a.initial_target_var]).forEach((function(e){s.get(e)&&(t[e]=s.get(e))})),0!==Object.keys(t).length&&(a.initial_task_ids=t)}return a}(i.task_ids,window.location.search);if(0!==Object.keys(l).length){const e={...i,...l};try{s(e),console.debug("initialize(): merged options are valid"),i=e}catch(e){console.error(`invalid URL option(s): ${e}`),n("Ignoring invalid URL parameter(s)",e),o=!0}}this.state.target_variables=i.target_variables,this.state.task_ids=i.task_ids,this.state.intervals=i.intervals,this.state.available_as_ofs=i.available_as_ofs,this.state.current_date=i.current_date,this.state.models=i.models,this.state.disclaimer=i.disclaimer,this.state.colors=Array(parseInt(this.state.models.length/10,10)+1).fill(["#0d0887","#46039f","#7201a8","#9c179e","#bd3786","#d8576b","#ed7953","#fb9f3a","#fdca26","#f0f921"]).flat(),this.state.initial_xaxis_range=i.hasOwnProperty("initial_xaxis_range")?i.initial_xaxis_range:null,this.state.initial_yaxis_range=i.hasOwnProperty("initial_yaxis_range")?i.initial_yaxis_range:null,this.state.selected_target_var=i.initial_target_var,this.state.selected_interval=i.initial_interval,this.state.selected_as_of_date=i.initial_as_of,this.state.selected_models=i.initial_checked_models,console.debug("initialize(): initializing UI");const c=$(r),d=i.hasOwnProperty("disclaimer"),p=Object.keys(this.state.task_ids)[0];return function(e,t,a){function s(e,t){return $(`<div class="form-row">\n    <label for="${e}" class="col-sm-4 col-form-label">${t}:</label>\n    <div class="col-sm-8">\n        <select id="${e}" class="form-control"></select>\n    </div>\n</div>`)}const i=$('<div class="col-md-3" id="forecastViz_options"></div>'),r=$("<form></form>");r.append(s("target_variable","Outcome")),t.forEach((e=>{r.append(s(e,e.replace(/[_-]/g," ").toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase()))))})),r.append(s("intervals","Interval")),i.append(r);const n=$('<div class="form-group form-check forecastViz_select_data ">\n    <input title="curr target" type="checkbox" id="forecastViz_Current_Truth" value="Current Target" checked>\n      &nbsp;<span id="currentTruthDate">Current (current target date here)</span>\n      &nbsp;<span class="forecastViz_dot" style="background-color: lightgrey; "></span>\n    <br>\n    <input title="target as of" type="checkbox" id="forecastViz_Truth_as_of" value="Target as of" checked>\n      &nbsp;<span id="asOfTruthDate">(as of truth date here)</span>\n      &nbsp;<span class="forecastViz_dot" style="background-color: black;"></span>\n</div>');i.append('<div class="pt-md-3">Select Target Data:</div>'),i.append(n),i.append($('<button type="button" class="btn btn-sm rounded-pill" id="forecastViz_shuffle" style="float: right;">\n    Shuffle Colours</button>\n<label class="forecastViz_label" for="forecastViz_all">Select Models:</label>\n<input type="checkbox" id="forecastViz_all">')),i.append($('<div id="forecastViz_select_model"></div>'));const o=$('<div class="col-md-9" id="forecastViz_viz"></div>'),l=$('<div class="container">\n    <div class="col-md-12 text-center">\n        <button type="button" class="btn btn-primary" id="decrement_as_of">&lt;</button>\n        <button type="button" class="btn btn-primary" id="increment_as_of">&gt;</button>\n    </div>\n</div>');a&&o.append($('<p class="forecastViz_disclaimer"><b><span id="disclaimer">(disclaimer here)</span></b></p>')),o.append($('<div id="ploty_div" style="width: 100%; height: 72vh; position: relative;"></div>')),o.append(l),o.append($('<p style="text-align:center"><small>Note: You can navigate to forecasts from previous weeks with the left and right arrow keys</small></p>')),e.empty().append(i,o)}(c,Object.keys(this.state.task_ids[p]),d),this.initializeUI(i.task_ids,i.initial_target_var,i.initial_task_ids,d),this.addEventHandlers(),console.debug("initialize(): fetching data and updating plot"),this.fetchDataUpdatePlot(!0,!0),o&&this.showOptionsInURL(),console.debug("initialize(): done"),null},showOptionsInURL(){const e=new URL(window.location.origin+window.location.pathname);e.searchParams.append("as_of",this.state.selected_as_of_date),e.searchParams.append("interval",this.state.selected_interval),e.searchParams.append("target_var",this.state.selected_target_var);const t=document.getElementById("ploty_div");if(0!==t.data.length){const a=t.layout.xaxis.range,s=t.layout.yaxis.range,i=2===a.length&&-1===a[0]&&6===a[1],r=2===s.length&&-1===s[0]&&4===s[1];i||t.layout.xaxis.range.forEach((t=>{const a=t.slice(0,10);e.searchParams.append("xaxis_range",a)})),r||t.layout.yaxis.range.forEach((t=>{e.searchParams.append("yaxis_range",t)}))}this.state.selected_models.forEach((t=>{e.searchParams.append("model",t)}));for(const[t,a]of Object.entries(this.selectedTaskIDValues()))e.searchParams.append(t,a);null!==window.history.state&&e.toString()===window.history.state.toString()||window.history.replaceState(e.toString(),"",e)},initializeUI(e,t,a,s){this.initializeTargetVarsUI(),this.initializeTaskIDsUI(e,t,a),this.initializeIntervalsUI(),this.updateModelsList(),$("#currentTruthDate").text(`Current (${this.state.current_date})`),this.updateTruthAsOfCheckboxText(),s&&$("#disclaimer").text(this.state.disclaimer);const i=document.getElementById("ploty_div"),r=this.getPlotlyLayout();Plotly.newPlot(i,[],r,{modeBarButtonsToRemove:["lasso2d","autoScale2d"],modeBarButtonsToAdd:[{name:"Jump to As_Of",icon:{width:448,height:512,path:"M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm64 80v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm128 0v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H336zM64 400v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H208zm112 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"},click:()=>null}]}),i.on("plotly_relayout",(function(){o.showOptionsInURL()})),this.initializeDateRangePicker()},initializeDateRangePicker(){const t=$("[data-title='Jump to As_Of']"),a=o.state.available_as_ofs[o.state.selected_target_var];t.daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:parseInt(a[0].slice(0,4)),maxYear:parseInt(a.at(-1).slice(0,4))}),t.on("apply.daterangepicker",(function(t,a){const s=function(t,a){if(0===a.length)throw new Error("availableYears is empty");if(-1!==a.indexOf(t))return t;const s=e(t),i=a.map((t=>e(t)));let r=null;return i.forEach((e=>{const t=null===r?null:Math.abs(r-s),a=Math.abs(e-s);(null===r||a<t)&&(r=e)})),r.toISOString().split("T")[0]}(a.startDate.format("YYYY-MM-DD"),o.state.available_as_ofs[o.state.selected_target_var]);a.setStartDate(new Date),a.setEndDate(new Date),s!==o.state.selected_as_of_date&&(o.state.selected_as_of_date=s,o.fetchDataUpdatePlot(!0,!1),o.updateTruthAsOfCheckboxText())}))},initializeTargetVarsUI(){const e=$("#target_variable"),t=this.state;this.state.target_variables.forEach((function(a){const s=a.value===t.selected_target_var?"selected":"",i=`<option value="${a.value}" ${s} >${a.text}</option>`;e.append(i)}))},initializeTaskIDsUI(e,t,a){Object.keys(e[t]).forEach((function(s){const i=$(`#${s}`);i.empty(),e[t][s].forEach((e=>{const t=e.value===a[s]?"selected":"",r=`<option value="${e.value}" ${t} >${e.text}</option>`;i.append(r)}))}))},initializeIntervalsUI(){const e=$("#intervals"),t=this.state;this.state.intervals.forEach((function(a){const s=`<option value="${a}" ${a===t.selected_interval?"selected":""} >${a}</option>`;e.append(s)}))},updateModelsList(){const e=$("#forecastViz_select_model"),t=this.state;e.empty(),this.state.models.filter((function(e){return o.state.forecasts.hasOwnProperty(e)})).forEach((function(a){const s=t.selected_models.indexOf(a)>-1,r=t.models.indexOf(a);e.append(i(a,t.colors[r],!0,s))})),this.state.models.filter((function(e){return!o.state.forecasts.hasOwnProperty(e)})).forEach((function(a){const s=t.selected_models.indexOf(a)>-1;e.append(i(a,"grey",!1,s))})),this.addModelCheckEventHandler()},addEventHandlers(){$("#target_variable").on("change",(function(){o.state.selected_target_var=this.value,o.initializeTaskIDsUI(o.state.task_ids,o.state.selected_target_var,o.state.task_ids[o.state.selected_target_var]),o.fetchDataUpdatePlot(!0,!0),o.showOptionsInURL()})),Object.keys(o.state.task_ids[o.state.selected_target_var]).forEach((function(e){$(`#${e}`).on("change",(function(){o.fetchDataUpdatePlot(!0,!0)}))})),$("#intervals").on("change",(function(){o.state.selected_interval=this.value,o.fetchDataUpdatePlot(!1,!1),o.showOptionsInURL()})),$("#forecastViz_Current_Truth").change((function(){r()})),$("#forecastViz_Truth_as_of").change((function(){r()})),$("#forecastViz_shuffle").click((function(){o.state.colors=o.state.colors.sort((()=>.5-Math.random())),o.updateModelsList(),o.updatePlot(!0)})),$("#forecastViz_all").change((function(){$(this).prop("checked")?(o.state.last_selected_models=o.state.selected_models,o.state.selected_models=o.selectableModels()):o.state.selected_models=o.state.last_selected_models,o.checkModels(o.state.selected_models),o.updatePlot(!0),o.showOptionsInURL()})),this.addModelCheckEventHandler(),$("#decrement_as_of").click((function(){o.decrementAsOf()})),$("#increment_as_of").click((function(){o.incrementAsOf()})),window.addEventListener("keydown",(function(e){"ArrowLeft"===e.code?o.decrementAsOf():"ArrowRight"===e.code&&o.incrementAsOf()}))},addModelCheckEventHandler(){$(".model-check").change((function(){const e=$(this),t=e.prop("id"),a=e.prop("checked"),s=o.state.selected_models.indexOf(t)>-1;a&&!s?o.state.selected_models.push(t):!a&&s&&(o.state.selected_models=o.state.selected_models.filter((function(e){return e!==t}))),o.fetchDataUpdatePlot(!1,!1),o.showOptionsInURL()}))},incrementAsOf(){const e=this.state,t=e.available_as_ofs[e.selected_target_var].indexOf(e.selected_as_of_date);t<e.available_as_ofs[e.selected_target_var].length-1&&(e.selected_as_of_date=e.available_as_ofs[e.selected_target_var][t+1],this.fetchDataUpdatePlot(!0,!1),this.updateTruthAsOfCheckboxText(),this.showOptionsInURL())},decrementAsOf(){const e=this.state,t=e.available_as_ofs[e.selected_target_var].indexOf(e.selected_as_of_date);t>0&&(e.selected_as_of_date=e.available_as_ofs[e.selected_target_var][t-1],this.fetchDataUpdatePlot(!0,!1),this.updateTruthAsOfCheckboxText(),this.showOptionsInURL())},updateTruthAsOfCheckboxText(){$("#asOfTruthDate").text(`As of ${this.state.selected_as_of_date}`)},selectableModels(){return this.state.models.filter((function(e){return o.state.forecasts.hasOwnProperty(e)}))},checkModels(e){this.state.models.forEach((function(t){const a=e.indexOf(t)>-1;$(`#${t}`).prop("checked",a)}))},selectedTaskIDs(){const e={};return Object.keys(this.state.task_ids[this.state.selected_target_var]).forEach((t=>{const a=$(`#${t}`).val(),s=o.state.task_ids[this.state.selected_target_var][t].find((e=>e.value===a));e[t]=s})),e},selectedTaskIDValues(){const e={};for(const[t,a]of Object.entries(this.selectedTaskIDs()))e[t]=a.value;return e},fetchDataUpdatePlot(e,t){console.debug(`fetchDataUpdatePlot(${e}, ${t}): entered`);const a=t;if(e){const s=[this.fetchAsOfTruth(),this.fetchForecasts()];t&&s.push(this.fetchCurrentTruth()),console.debug(`fetchDataUpdatePlot(${e}, ${t}): waiting on promises`);const i=$("#ploty_div");this.isIndicateRedraw&&i.fadeTo(0,.25),Promise.all(s).then((s=>{console.debug(`fetchDataUpdatePlot(${e}, ${t}): Promise.all() done. updating plot`,s),this.updateModelsList(),this.updatePlot(a),this.isIndicateRedraw&&i.fadeTo(0,1)}))}else console.debug(`fetchDataUpdatePlot(${e}, ${t}): updating plot`),this.updatePlot(a)},fetchCurrentTruth(){return this.state.current_truth=[],this._fetchData(!1,this.state.selected_target_var,this.selectedTaskIDValues(),this.state.current_date).then((e=>e.json())).then((e=>{this.state.current_truth=e})).catch((e=>console.error(`fetchCurrentTruth(): error: ${e.message}`)))},fetchAsOfTruth(){return this.state.as_of_truth=[],this._fetchData(!1,this.state.selected_target_var,this.selectedTaskIDValues(),this.state.selected_as_of_date).then((e=>e.json())).then((e=>{this.state.as_of_truth=e})).catch((e=>console.error(`fetchAsOfTruth(): error: ${e.message}`)))},fetchForecasts(){return this.state.forecasts={},this._fetchData(!0,this.state.selected_target_var,this.selectedTaskIDValues(),this.state.selected_as_of_date).then((e=>e.json())).then((e=>{this.state.forecasts=e})).catch((e=>console.error(`fetchForecasts(): error: ${e.message}`)))},updatePlot(e){const t=document.getElementById("ploty_div"),a=this.getPlotlyData();let s,i,r,n,o=this.getPlotlyLayout();0===a.length&&(o={title:{text:`No Visualization Data Found for ${this.state.selected_as_of_date}`}});const l=0!==t.data.length;l&&(s=t.layout.xaxis.range,i=t.layout.yaxis.range,r=2===s.length&&-1===s[0]&&6===s[1],n=2===i.length&&-1===i[0]&&4===i[1]),Plotly.react(t,a,o);const c={};l?(r?null!=this.state.initial_xaxis_range&&(c["xaxis.range"]=this.state.initial_xaxis_range):c["xaxis.range"]=s,e||(n?null!=this.state.initial_yaxis_range&&(c["yaxis.range"]=this.state.initial_yaxis_range):c["yaxis.range"]=i)):(null!=this.state.initial_xaxis_range&&(c["xaxis.range"]=this.state.initial_xaxis_range),null!=this.state.initial_yaxis_range&&(c["yaxis.range"]=this.state.initial_yaxis_range)),Plotly.relayout(t,c),this.initializeDateRangePicker()},getPlotlyLayout(){if(0===this.state.target_variables.length)return{};const e=this.state.target_variables.filter((e=>e.value===this.state.selected_target_var))[0].plot_text;return{autosize:!0,showlegend:!1,title:{text:`Forecasts of ${e} <br> in ${Object.values(this.selectedTaskIDs()).map((e=>e.text)).join(", ")} as of ${this.state.selected_as_of_date}`,x:.5,y:.9,xanchor:"center",yanchor:"top"},xaxis:{title:{text:"Date"},rangeslider:{}},yaxis:{title:{text:e,hoverformat:".2f"},fixedrange:!1}}},getPlotlyData(){const e=this.state;let t=[];e.selected_truth.includes("Current Target")&&0!==Object.keys(e.current_truth).length&&t.push({x:e.current_truth.date,y:e.current_truth.y,type:"scatter",mode:"lines",name:"Current Target",marker:{color:"darkgray"}}),e.selected_truth.includes("Target as of")&&0!==Object.keys(e.as_of_truth).length&&t.push({x:e.as_of_truth.date,y:e.as_of_truth.y,type:"scatter",mode:"lines",opacity:.5,name:`Target as of ${e.selected_as_of_date}`,marker:{color:"black"}});let a=[];0!==e.forecasts.length&&(a=Object.keys(e.forecasts).map((t=>{if(e.selected_models.includes(t)){const a=e.models.indexOf(t),s=e.forecasts[t],i=s.target_end_date,r=s["q0.025"],n=s["q0.25"],o=s["q0.5"],l=s["q0.75"],c=s["q0.975"],d=[];for(let e=0;e<i.length;e++)d.push({date:i[e],lq1:r[e],lq2:n[e],uq1:l[e],uq2:c[e],mid:o[e]});d.sort(((e,t)=>moment(e.date).isBefore(t.date)?-1:1));for(let e=0;e<d.length;e++)s.target_end_date[e]=d[e].date,s["q0.025"][e]=d[e].lq1,s["q0.25"][e]=d[e].lq2,s["q0.5"][e]=d[e].mid,s["q0.75"][e]=d[e].uq1,s["q0.975"][e]=d[e].uq2;const p=[];p.push(s.target_end_date.slice(0)[0]);const h=[];return h.push(s["q0.5"].slice(0)[0]),{x:p,y:h,mode:"lines",type:"scatter",name:t,hovermode:!1,opacity:.7,line:{color:e.colors[a]},hoverinfo:"none"}}return[]}))),t=a.concat(...t);let s=[];return 0!==e.forecasts.length&&(s=Object.keys(e.forecasts).map((t=>{if(e.selected_models.includes(t)){const a=e.models.indexOf(t),s="hosp"===e.selected_target_var?"lines":"lines+markers",i=e.forecasts[t];let r,n;const o={x:i.target_end_date,y:i["q0.5"],type:"scatter",name:t,opacity:.7,mode:s,line:{color:e.colors[a]}};if("50%"===e.selected_interval)n="q0.25",r="q0.75";else{if("95%"!==e.selected_interval)return[o];n="q0.025",r="q0.975"}const l=(Object.keys(e.as_of_truth).length,i.target_end_date),c=(Object.keys(e.as_of_truth).length,i[n]),d=(Object.keys(e.as_of_truth).length,i[r]);return[o,{x:[].concat(l,l.slice().reverse()),y:[].concat(c,d.slice().reverse()),fill:"toself",fillcolor:e.colors[a],opacity:.3,line:{color:"transparent"},type:"scatter",name:t,showlegend:!1,hoverinfo:"skip"}]}return[]}))),t=t.concat(...s),t}},l=o})();var y=g.Z;export{y as default};